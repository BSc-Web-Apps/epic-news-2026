{"version":3,"file":"__note-editor-i02hIIcD.js","sources":["../../../app/routes/users+/$username_+/__note-editor.tsx"],"sourcesContent":["import {\n\tFormProvider,\n\tgetFieldsetProps,\n\tgetFormProps,\n\tgetInputProps,\n\tgetTextareaProps,\n\tuseForm,\n\ttype FieldMetadata,\n} from '@conform-to/react'\nimport { getZodConstraint, parseWithZod } from '@conform-to/zod'\nimport { Img } from 'openimg/react'\nimport { useState } from 'react'\nimport { Form } from 'react-router'\nimport { z } from 'zod'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { floatingToolbarClassName } from '#app/components/floating-toolbar.tsx'\nimport { ErrorList, Field, TextareaField } from '#app/components/forms.tsx'\nimport { Button } from '#app/components/ui/button.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { Label } from '#app/components/ui/label.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { Textarea } from '#app/components/ui/textarea.tsx'\nimport { cn, getNoteImgSrc, useIsPending } from '#app/utils/misc.tsx'\nimport { type Route } from './+types/notes.$noteId_.edit.ts'\n\nconst titleMinLength = 1\nconst titleMaxLength = 100\nconst contentMinLength = 1\nconst contentMaxLength = 10000\n\nexport const MAX_UPLOAD_SIZE = 1024 * 1024 * 3 // 3MB\n\nconst ImageFieldsetSchema = z.object({\n\tid: z.string().optional(),\n\tfile: z\n\t\t.instanceof(File)\n\t\t.optional()\n\t\t.refine((file) => {\n\t\t\treturn !file || file.size <= MAX_UPLOAD_SIZE\n\t\t}, 'File size must be less than 3MB'),\n\taltText: z.string().optional(),\n})\n\nexport type ImageFieldset = z.infer<typeof ImageFieldsetSchema>\n\nexport const NoteEditorSchema = z.object({\n\tid: z.string().optional(),\n\ttitle: z.string().min(titleMinLength).max(titleMaxLength),\n\tcontent: z.string().min(contentMinLength).max(contentMaxLength),\n\timages: z.array(ImageFieldsetSchema).max(5).optional(),\n})\n\nexport function NoteEditor({\n\tnote,\n\tactionData,\n}: {\n\tnote?: Route.ComponentProps['loaderData']['note']\n\tactionData?: Route.ComponentProps['actionData']\n}) {\n\tconst isPending = useIsPending()\n\n\tconst [form, fields] = useForm({\n\t\tid: 'note-editor',\n\t\tconstraint: getZodConstraint(NoteEditorSchema),\n\t\tlastResult: actionData?.result,\n\t\tonValidate({ formData }) {\n\t\t\treturn parseWithZod(formData, { schema: NoteEditorSchema })\n\t\t},\n\t\tdefaultValue: {\n\t\t\t...note,\n\t\t\timages: note?.images ?? [{}],\n\t\t},\n\t\tshouldRevalidate: 'onBlur',\n\t})\n\tconst imageList = fields.images.getFieldList()\n\n\treturn (\n\t\t<div className=\"absolute inset-0\">\n\t\t\t<FormProvider context={form.context}>\n\t\t\t\t<Form\n\t\t\t\t\tmethod=\"POST\"\n\t\t\t\t\tclassName=\"flex h-full flex-col gap-y-4 overflow-x-hidden overflow-y-auto px-10 pt-12 pb-28\"\n\t\t\t\t\t{...getFormProps(form)}\n\t\t\t\t\tencType=\"multipart/form-data\"\n\t\t\t\t>\n\t\t\t\t\t{/*\n\t\t\t\t\tThis hidden submit button is here to ensure that when the user hits\n\t\t\t\t\t\"enter\" on an input field, the primary form function is submitted\n\t\t\t\t\trather than the first button in the form (which is delete/add image).\n\t\t\t\t*/}\n\t\t\t\t\t<button type=\"submit\" className=\"hidden\" />\n\t\t\t\t\t{note ? <input type=\"hidden\" name=\"id\" value={note.id} /> : null}\n\t\t\t\t\t<div className=\"flex flex-col gap-1\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabelProps={{ children: 'Title' }}\n\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\tautoFocus: true,\n\t\t\t\t\t\t\t\t...getInputProps(fields.title, { type: 'text' }),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\terrors={fields.title.errors}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextareaField\n\t\t\t\t\t\t\tlabelProps={{ children: 'Content' }}\n\t\t\t\t\t\t\ttextareaProps={{\n\t\t\t\t\t\t\t\t...getTextareaProps(fields.content),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\terrors={fields.content.errors}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>Images</Label>\n\t\t\t\t\t\t\t<ul className=\"flex flex-col gap-4\">\n\t\t\t\t\t\t\t\t{imageList.map((imageMeta, index) => {\n\t\t\t\t\t\t\t\t\tconst imageMetaId = imageMeta.getFieldset().id.value\n\t\t\t\t\t\t\t\t\tconst image = note?.images.find(\n\t\t\t\t\t\t\t\t\t\t({ id }) => id === imageMetaId,\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\t\tkey={imageMeta.key}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"border-muted-foreground relative border-b-2\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-foreground-destructive absolute top-0 right-0\"\n\t\t\t\t\t\t\t\t\t\t\t\t{...form.remove.getButtonProps({\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: fields.images.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<span aria-hidden>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon name=\"cross-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</span>{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tRemove image {index + 1}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<ImageChooser\n\t\t\t\t\t\t\t\t\t\t\t\tmeta={imageMeta}\n\t\t\t\t\t\t\t\t\t\t\t\tobjectKey={image?.objectKey}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"mt-3\"\n\t\t\t\t\t\t\t{...form.insert.getButtonProps({ name: fields.images.name })}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span aria-hidden>\n\t\t\t\t\t\t\t\t<Icon name=\"plus\">Image</Icon>\n\t\t\t\t\t\t\t</span>{' '}\n\t\t\t\t\t\t\t<span className=\"sr-only\">Add image</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ErrorList id={form.errorId} errors={form.errors} />\n\t\t\t\t</Form>\n\t\t\t\t<div className={floatingToolbarClassName}>\n\t\t\t\t\t<Button variant=\"destructive\" {...form.reset.getButtonProps()}>\n\t\t\t\t\t\tReset\n\t\t\t\t\t</Button>\n\t\t\t\t\t<StatusButton\n\t\t\t\t\t\tform={form.id}\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\t\tstatus={isPending ? 'pending' : 'idle'}\n\t\t\t\t\t>\n\t\t\t\t\t\tSubmit\n\t\t\t\t\t</StatusButton>\n\t\t\t\t</div>\n\t\t\t</FormProvider>\n\t\t</div>\n\t)\n}\n\nfunction ImageChooser({\n\tmeta,\n\tobjectKey,\n}: {\n\tmeta: FieldMetadata<ImageFieldset>\n\tobjectKey: string | undefined\n}) {\n\tconst fields = meta.getFieldset()\n\tconst existingImage = Boolean(fields.id.initialValue)\n\tconst [previewImage, setPreviewImage] = useState<string | null>(\n\t\tobjectKey ? getNoteImgSrc(objectKey) : null,\n\t)\n\tconst [altText, setAltText] = useState(fields.altText.initialValue ?? '')\n\n\treturn (\n\t\t<fieldset {...getFieldsetProps(meta)}>\n\t\t\t<div className=\"flex gap-3\">\n\t\t\t\t<div className=\"w-32\">\n\t\t\t\t\t<div className=\"relative size-32\">\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\thtmlFor={fields.file.id}\n\t\t\t\t\t\t\tclassName={cn('group absolute size-32 rounded-lg', {\n\t\t\t\t\t\t\t\t'bg-accent opacity-40 focus-within:opacity-100 hover:opacity-100':\n\t\t\t\t\t\t\t\t\t!previewImage,\n\t\t\t\t\t\t\t\t'cursor-pointer focus-within:ring-2': !existingImage,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{previewImage ? (\n\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t{existingImage && !previewImage.startsWith('data:') ? (\n\t\t\t\t\t\t\t\t\t\t<Img\n\t\t\t\t\t\t\t\t\t\t\tsrc={previewImage}\n\t\t\t\t\t\t\t\t\t\t\talt={altText ?? ''}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"size-32 rounded-lg object-cover\"\n\t\t\t\t\t\t\t\t\t\t\twidth={512}\n\t\t\t\t\t\t\t\t\t\t\theight={512}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={previewImage}\n\t\t\t\t\t\t\t\t\t\t\talt={altText ?? ''}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"size-32 rounded-lg object-cover\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{existingImage ? null : (\n\t\t\t\t\t\t\t\t\t\t<div className=\"bg-secondary text-secondary-foreground pointer-events-none absolute -top-0.5 -right-0.5 rotate-12 rounded-sm px-2 py-1 text-xs shadow-md\">\n\t\t\t\t\t\t\t\t\t\t\tnew\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className=\"border-muted-foreground text-muted-foreground flex size-32 items-center justify-center rounded-lg border text-4xl\">\n\t\t\t\t\t\t\t\t\t<Icon name=\"plus\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{existingImage ? (\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t{...getInputProps(fields.id, { type: 'hidden' })}\n\t\t\t\t\t\t\t\t\tkey={fields.id.key}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\taria-label=\"Image\"\n\t\t\t\t\t\t\t\tclassName=\"absolute top-0 left-0 z-0 size-32 cursor-pointer opacity-0\"\n\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\tconst file = event.target.files?.[0]\n\n\t\t\t\t\t\t\t\t\tif (file) {\n\t\t\t\t\t\t\t\t\t\tconst reader = new FileReader()\n\t\t\t\t\t\t\t\t\t\treader.onloadend = () => {\n\t\t\t\t\t\t\t\t\t\t\tsetPreviewImage(reader.result as string)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treader.readAsDataURL(file)\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetPreviewImage(null)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\t\t\t{...getInputProps(fields.file, { type: 'file' })}\n\t\t\t\t\t\t\t\tkey={fields.file.key}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"min-h-[32px] px-4 pt-1 pb-3\">\n\t\t\t\t\t\t<ErrorList id={fields.file.errorId} errors={fields.file.errors} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<Label htmlFor={fields.altText.id}>Alt Text</Label>\n\t\t\t\t\t<Textarea\n\t\t\t\t\t\tonChange={(e) => setAltText(e.currentTarget.value)}\n\t\t\t\t\t\t{...getTextareaProps(fields.altText)}\n\t\t\t\t\t\tkey={fields.altText.key}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"min-h-[32px] px-4 pt-1 pb-3\">\n\t\t\t\t\t\t<ErrorList\n\t\t\t\t\t\t\tid={fields.altText.errorId}\n\t\t\t\t\t\t\terrors={fields.altText.errors}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"min-h-[32px] px-4 pt-1 pb-3\">\n\t\t\t\t<ErrorList id={meta.errorId} errors={meta.errors} />\n\t\t\t</div>\n\t\t</fieldset>\n\t)\n}\n\nexport function ErrorBoundary() {\n\treturn (\n\t\t<GeneralErrorBoundary\n\t\t\tstatusHandlers={{\n\t\t\t\t404: ({ params }) => (\n\t\t\t\t\t<p>No note with the id \"{params.noteId}\" exists</p>\n\t\t\t\t),\n\t\t\t}}\n\t\t/>\n\t)\n}\n"],"names":["titleMinLength","titleMaxLength","contentMinLength","contentMaxLength","MAX_UPLOAD_SIZE","ImageFieldsetSchema","z.object","z.string","z.instanceof","file","NoteEditorSchema","z.array","NoteEditor","note","actionData","isPending","useIsPending","form","fields","useForm","getZodConstraint","formData","parseWithZod","imageList","jsx","FormProvider","jsxs","Form","getFormProps","Field","getInputProps","TextareaField","getTextareaProps","Label","imageMeta","index","imageMetaId","image","id","Icon","ImageChooser","Button","ErrorList","floatingToolbarClassName","StatusButton","meta","objectKey","existingImage","previewImage","setPreviewImage","useState","getNoteImgSrc","altText","setAltText","getFieldsetProps","cn","Img","createElement","event","reader","Textarea","e"],"mappings":"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"}