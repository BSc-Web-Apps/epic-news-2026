import{w as p,a as u,r as d,j as e,L as h,F as f}from"./chunk-UH6JLGW7-vC5r3Eub.js";import{d as x,I as j,b as N}from"./misc-CB38qpgG.js";import{G as g}from"./error-boundary-DyX_TQyi.js";import{f as b}from"./floating-toolbar-VQB8DV6X.js";import{E as y}from"./forms-D7XpjJLD.js";import{B as w}from"./button-BP3wkmPp.js";import{I as m}from"./icon-C3K2m46L.js";import{S as I}from"./status-button-hfmu5Em_.js";import{a as E,b as v}from"./user-Cj7yIJmz.js";import{u as B,g as P}from"./helpers-Ch5Ym2hM.js";import"./debug-build-DiXn8T-e.js";import"./index-Bn1b60ek.js";import"./index-C2xojAqc.js";import"./index-BlK1szso.js";import"./dom--0h4o3Zv.js";import"./tooltip-fkOurSWR.js";const U=p(function({loaderData:s,actionData:o}){const n=E(),a=n?.id===s.note.ownerId,i=v(n,a?"delete:note:own":"delete:note:any"),l=i||a,r=d.useRef(null);return d.useEffect(()=>{r.current&&r.current.focus()},[s.note.id]),e.jsxs("section",{ref:r,className:"absolute inset-0 flex flex-col px-10","aria-labelledby":"note-title",tabIndex:-1,children:[e.jsx("h2",{id:"note-title",className:"text-h2 mb-2 pt-12 lg:mb-6",children:s.note.title}),e.jsxs("div",{className:`${l?"pb-24":"pb-12"} overflow-y-auto`,children:[e.jsx("ul",{className:"flex flex-wrap gap-5 py-5",children:s.note.images.map(c=>e.jsx("li",{children:e.jsx("a",{href:x(c.objectKey),children:e.jsx(j,{src:x(c.objectKey),alt:c.altText??"",className:"size-32 rounded-lg object-cover",width:512,height:512})})},c.objectKey))}),e.jsx("p",{className:"text-sm whitespace-break-spaces md:text-lg",children:s.note.content})]}),l?e.jsxs("div",{className:b,children:[e.jsx("span",{className:"text-foreground/90 text-sm max-[524px]:hidden",children:e.jsxs(m,{name:"clock",className:"scale-125",children:[s.timeAgo," ago"]})}),e.jsxs("div",{className:"grid flex-1 grid-cols-2 justify-end gap-2 min-[525px]:flex md:gap-4",children:[i?e.jsx(R,{id:s.note.id,actionData:o}):null,e.jsx(w,{asChild:!0,className:"min-[525px]:max-md:aspect-square min-[525px]:max-md:px-0",children:e.jsx(h,{to:"edit",children:e.jsx(m,{name:"pencil-1",className:"scale-125 max-md:scale-150",children:e.jsx("span",{className:"max-md:hidden",children:"Edit"})})})})]})]}):null]})});function R({id:t,actionData:s}){const o=N(),[n]=B({id:"delete-note",lastResult:s?.result});return e.jsxs(f,{method:"POST",...P(n),children:[e.jsx("input",{type:"hidden",name:"noteId",value:t}),e.jsx(I,{type:"submit",name:"intent",value:"delete-note",variant:"destructive",status:o?"pending":n.status??"idle",disabled:o,className:"w-full max-md:aspect-square max-md:px-0",children:e.jsx(m,{name:"trash",className:"scale-125 max-md:scale-150",children:e.jsx("span",{className:"max-md:hidden",children:"Delete"})})}),e.jsx(y,{errors:n.errors,id:n.errorId})]})}const Y=({data:t,params:s,matches:o})=>{const a=o.find(r=>r?.id==="routes/users+/$username_+/notes")?.data?.owner.name??s.username,i=t?.note.title??"Note",l=t&&t.note.content.length>100?t?.note.content.slice(0,97)+"...":"No content";return[{title:`${i} | ${a}'s Notes | Epic Notes`},{name:"description",content:l}]},J=u(function(){return e.jsx(g,{statusHandlers:{403:()=>e.jsx("p",{children:"You are not allowed to do that"}),404:({params:s})=>e.jsxs("p",{children:['No note with the id "',s.noteId,'" exists']})}})});export{J as ErrorBoundary,U as default,Y as meta};
//# sourceMappingURL=notes._noteId-BZU4Z_Qd.js.map
