{"version":3,"file":"profile-B9DncKvK.js","sources":["../../../app/routes/settings+/profile.tsx"],"sourcesContent":["import { invariantResponse } from '@epic-web/invariant'\nimport { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { Link, Outlet, useMatches } from 'react-router'\nimport { z } from 'zod'\nimport { Spacer } from '#app/components/spacer.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { cn } from '#app/utils/misc.tsx'\nimport { useUser } from '#app/utils/user.ts'\nimport { type Route } from './+types/profile.ts'\n\nexport const BreadcrumbHandle = z.object({ breadcrumb: z.any() })\nexport type BreadcrumbHandle = z.infer<typeof BreadcrumbHandle>\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"file-text\">Edit Profile</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nexport async function loader({ request }: Route.LoaderArgs) {\n\tconst userId = await requireUserId(request)\n\tconst user = await prisma.user.findUnique({\n\t\twhere: { id: userId },\n\t\tselect: { username: true },\n\t})\n\tinvariantResponse(user, 'User not found', { status: 404 })\n\treturn {}\n}\n\nconst BreadcrumbHandleMatch = z.object({\n\thandle: BreadcrumbHandle,\n})\n\nexport default function EditUserProfile() {\n\tconst user = useUser()\n\tconst matches = useMatches()\n\tconst breadcrumbs = matches\n\t\t.map((m) => {\n\t\t\tconst result = BreadcrumbHandleMatch.safeParse(m)\n\t\t\tif (!result.success || !result.data.handle.breadcrumb) return null\n\t\t\treturn (\n\t\t\t\t<Link key={m.id} to={m.pathname} className=\"flex items-center\">\n\t\t\t\t\t{result.data.handle.breadcrumb}\n\t\t\t\t</Link>\n\t\t\t)\n\t\t})\n\t\t.filter(Boolean)\n\n\treturn (\n\t\t<div className=\"m-auto mt-16 mb-24 max-w-3xl\">\n\t\t\t<div className=\"container\">\n\t\t\t\t<ul className=\"flex gap-3\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tclassName=\"text-muted-foreground\"\n\t\t\t\t\t\t\tto={`/users/${user.username}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t{breadcrumbs.map((breadcrumb, i, arr) => (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tclassName={cn('flex items-center gap-3', {\n\t\t\t\t\t\t\t\t'text-muted-foreground': i < arr.length - 1,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon name=\"arrow-right\" size=\"sm\">\n\t\t\t\t\t\t\t\t{breadcrumb}\n\t\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<Spacer size=\"xs\" />\n\t\t\t<main className=\"bg-muted mx-auto px-6 py-8 md:container md:rounded-3xl\">\n\t\t\t\t<Outlet />\n\t\t\t</main>\n\t\t</div>\n\t)\n}\n"],"names":["BreadcrumbHandle","z","breadcrumb","handle","jsx","Icon","name","children","getSitemapEntries","BreadcrumbHandleMatch","profile","_UNSAFE_withComponentProps","user","useUser","breadcrumbs","useMatches","map","m","result","safeParse","success","data","Link","to","pathname","className","id","filter","Boolean","jsxs","username","i","arr","cn","length","size","Spacer","Outlet"],"mappings":"0RAYO,MAAMA,EAAmBC,EAAS,CAAEC,WAAYD,EAAE,CAAM,CAAC,EAGnDE,EAAuC,CACnDD,WAAYE,EAAAA,IAACC,EAAA,CAAKC,KAAK,YAAYC,SAAA,cAAA,CAAY,EAC/CC,kBAAmBA,IAAM,IAC1B,EAYMC,EAAwBR,EAAS,CACtCE,OAAQH,CACT,CAAC,EAEDU,EAAAC,EAAA,UAA0C,CACzC,MAAMC,EAAOC,EAAA,EAEPC,EADUC,EAAA,EAEdC,IAAKC,GAAM,CACX,MAAMC,EAAST,EAAsBU,UAAUF,CAAC,EAChD,MAAI,CAACC,EAAOE,SAAW,CAACF,EAAOG,KAAKlB,OAAOD,WAAmB,KAE7DE,EAAAA,IAACkB,EAAA,CAAgBC,GAAIN,EAAEO,SAAUC,UAAU,oBACzClB,SAAAW,EAAOG,KAAKlB,OAAOD,UAAA,EADVe,EAAES,EAEb,CAEF,CAAC,EACAC,OAAOC,OAAO,EAEhB,OACCC,EAAAA,KAAC,MAAA,CAAIJ,UAAU,+BACdlB,SAAA,CAAAH,EAAAA,IAAC,OAAIqB,UAAU,YACdlB,SAAAsB,EAAAA,KAAC,KAAA,CAAGJ,UAAU,aACblB,SAAA,CAAAH,EAAAA,IAAC,KAAA,CACAG,SAAAH,EAAAA,IAACkB,EAAA,CACAG,UAAU,wBACVF,GAAI,UAAUX,EAAKkB,QAAQ,GAC3BvB,SAAA,UAED,CAAA,CACD,EACCO,EAAYE,IAAI,CAACd,EAAY6B,EAAGC,IAChC5B,EAAAA,IAAC,KAAA,CAEAqB,UAAWQ,EAAG,0BAA2B,CACxC,wBAAyBF,EAAIC,EAAIE,OAAS,CAC3C,CAAC,EAED3B,eAACF,EAAA,CAAKC,KAAK,cAAc6B,KAAK,KAC5B5B,SAAAL,EACF,GAPK6B,CAQN,CACA,CAAA,EACF,CAAA,CACD,EACA3B,EAAAA,IAACgC,EAAA,CAAOD,KAAK,IAAA,CAAK,QACjB,OAAA,CAAKV,UAAU,yDACflB,SAAAH,EAAAA,IAACiC,IAAO,CAAA,CACT,CAAA,CAAA,CACD,CAEF,CAAA"}