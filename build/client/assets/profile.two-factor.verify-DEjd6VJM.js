import{j as e,w as f,f as h,F as x}from"./chunk-UH6JLGW7-vC5r3Eub.js";import{O as y,E as j}from"./forms-D7XpjJLD.js";import{I as g}from"./icon-C3K2m46L.js";import{S as n}from"./status-button-hfmu5Em_.js";import{b as v}from"./misc-CB38qpgG.js";import{u as b,g as w,a as N}from"./helpers-Ch5Ym2hM.js";import{g as F}from"./constraint-cuuFo8uo.js";import{p as P}from"./parse-Bbiqquwr.js";import{o as l,l as m,s as S,d as I}from"./types-kDhgxygl.js";import"./index-Bn1b60ek.js";import"./index-C2xojAqc.js";import"./index-BlK1szso.js";import"./dom--0h4o3Zv.js";import"./button-BP3wkmPp.js";import"./tooltip-fkOurSWR.js";const G={breadcrumb:e.jsx(g,{name:"check",children:"Verify"}),getSitemapEntries:()=>null},C=l({intent:m("cancel")}),T=l({intent:m("verify"),code:S().min(6).max(6)}),c=I("intent",[C,T]),H=f(function({loaderData:o,actionData:d}){const p=h(),a=v(),r=a?p.formData?.get("intent"):null,[t,s]=b({id:"verify-form",constraint:F(c),lastResult:d?.result,onValidate({formData:u}){return P(u,{schema:c})}}),i=s.intent.value;return e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("img",{alt:"qr code",src:o.qrCode,className:"size-56"}),e.jsx("p",{children:"Scan this QR code with your authenticator app."}),e.jsx("p",{className:"text-sm",children:"If you cannot scan the QR code, you can manually add this account to your authenticator app using this code:"}),e.jsx("div",{className:"p-3",children:e.jsx("pre",{className:"text-sm break-all whitespace-pre-wrap","aria-label":"One-time Password URI",children:o.otpUri})}),e.jsx("p",{className:"text-sm",children:"Once you've added the account, enter the code from your authenticator app below. Once you enable 2FA, you will need to enter a code from your authenticator app every time you log in or perform important actions. Do not lose access to your authenticator app, or you will lose access to your account."}),e.jsx("div",{className:"flex w-full max-w-xs flex-col justify-center gap-4",children:e.jsxs(x,{method:"POST",...w(t),className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(y,{labelProps:{htmlFor:s.code.id,children:"Code"},inputProps:{...N(s.code,{type:"text"}),autoFocus:!0,autoComplete:"one-time-code"},errors:s.code.errors})}),e.jsx("div",{className:"min-h-[32px] px-4 pt-1 pb-3",children:e.jsx(j,{id:t.errorId,errors:t.errors})}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx(n,{className:"w-full",status:r==="verify"?"pending":i==="verify"?t.status??"idle":"idle",type:"submit",name:"intent",value:"verify",children:"Submit"}),e.jsx(n,{className:"w-full",variant:"secondary",status:r==="cancel"?"pending":i==="cancel"?t.status??"idle":"idle",type:"submit",name:"intent",value:"cancel",disabled:a,children:"Cancel"})]})]})})]})})});export{H as default,G as handle};
//# sourceMappingURL=profile.two-factor.verify-DEjd6VJM.js.map
