{"version":3,"file":"notes._noteId_.edit-DPj1mS-r.js","sources":["../../../app/routes/users+/$username_+/notes.$noteId_.edit.tsx"],"sourcesContent":["import { invariantResponse } from '@epic-web/invariant'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { type Route } from './+types/notes.$noteId_.edit.ts'\nimport { NoteEditor } from './__note-editor.tsx'\n\nexport { action } from './__note-editor.server.tsx'\n\nexport async function loader({ params, request }: Route.LoaderArgs) {\n\tconst userId = await requireUserId(request)\n\tconst note = await prisma.note.findFirst({\n\t\tselect: {\n\t\t\tid: true,\n\t\t\ttitle: true,\n\t\t\tcontent: true,\n\t\t\timages: {\n\t\t\t\tselect: {\n\t\t\t\t\tid: true,\n\t\t\t\t\taltText: true,\n\t\t\t\t\tobjectKey: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\twhere: {\n\t\t\tid: params.noteId,\n\t\t\townerId: userId,\n\t\t},\n\t})\n\tinvariantResponse(note, 'Not found', { status: 404 })\n\treturn { note }\n}\n\nexport default function NoteEdit({\n\tloaderData,\n\tactionData,\n}: Route.ComponentProps) {\n\treturn <NoteEditor note={loaderData.note} actionData={actionData} />\n}\n\nexport function ErrorBoundary() {\n\treturn (\n\t\t<GeneralErrorBoundary\n\t\t\tstatusHandlers={{\n\t\t\t\t404: ({ params }) => (\n\t\t\t\t\t<p>No note with the id \"{params.noteId}\" exists</p>\n\t\t\t\t),\n\t\t\t}}\n\t\t/>\n\t)\n}\n"],"names":["notes_$noteId__edit","_UNSAFE_withComponentProps","loaderData","actionData","jsx","NoteEditor","note","ErrorBoundary","_UNSAFE_withErrorBoundaryProps","GeneralErrorBoundary","statusHandlers","params","children","noteId"],"mappings":"+nBAiCA,MAAAA,EAAAC,EAAA,SAAiC,CAChCC,WAAAA,EACAC,WAAAA,CACD,EAAyB,CACxB,OAAOC,EAAAA,IAACC,EAAA,CAAWC,KAAMJ,EAAWI,KAAMH,WAAAA,CAAA,CAAwB,CACnE,CAAA,EAEOI,EAAAC,EAAA,UAAyB,CAC/B,OACCJ,EAAAA,IAACK,EAAA,CACAC,eAAgB,CACf,IAAK,CAAC,CAAEC,OAAAA,CAAO,WACb,IAAA,CAAEC,SAAA,CAAA,wBAAsBD,EAAOE,OAAO,UAAA,EAAQ,CAEjD,CAAA,CACD,CAEF,CAAA"}