import{w as x,a as p,b as f,c as j,j as e,F as y,d as g,L as v}from"./chunk-UH6JLGW7-vC5r3Eub.js";import{G as N}from"./error-boundary-DyX_TQyi.js";import{F as m}from"./forms-D7XpjJLD.js";import{S as o}from"./spacer-CWmOD1GL.js";import{B as b}from"./button-BP3wkmPp.js";import{u as C,a as P}from"./misc-CB38qpgG.js";import"./debug-build-DiXn8T-e.js";import"./index-Bn1b60ek.js";import"./index-C2xojAqc.js";import"./index-BlK1szso.js";import"./dom--0h4o3Zv.js";const $={getSitemapEntries:()=>null},T=x(function({loaderData:t}){const[n]=f(),c=j(),i=n.get("query")??"",l=n.get("limit")??"100",r=n.get("instance")??t.instance,h=C(async s=>{await c(s)},400);return e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"text-h1",children:"Cache Admin"}),e.jsx(o,{size:"2xs"}),e.jsxs(y,{method:"get",className:"flex flex-col gap-4",onChange:s=>h(s.currentTarget),children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex flex-1 gap-4",children:[e.jsx("button",{type:"submit",className:"flex h-16 items-center justify-center",children:"ðŸ”Ž"}),e.jsx(m,{className:"flex-1",labelProps:{children:"Search"},inputProps:{type:"search",name:"query",defaultValue:i}}),e.jsx("div",{className:"text-muted-foreground flex h-16 w-14 items-center text-lg font-medium",children:e.jsx("span",{title:"Total results shown",children:t.cacheKeys.sqlite.length+t.cacheKeys.lru.length})})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(m,{labelProps:{children:"Limit"},inputProps:{name:"limit",defaultValue:l,type:"number",step:"1",min:"1",max:"10000",placeholder:"results limit"}}),e.jsx("select",{name:"instance",defaultValue:r,children:Object.entries(t.instances).map(([s,d])=>e.jsx("option",{value:s,children:[s,`(${d})`,s===t.currentInstanceInfo.currentInstance?"(current)":"",s===t.currentInstanceInfo.primaryInstance?" (primary)":""].filter(Boolean).join(" ")},s))})]})]}),e.jsx(o,{size:"2xs"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h2",{className:"text-h2",children:"LRU Cache:"}),t.cacheKeys.lru.map(s=>e.jsx(u,{cacheKey:s,instance:r,type:"lru"},s))]}),e.jsx(o,{size:"3xs"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h2",{className:"text-h2",children:"SQLite Cache:"}),t.cacheKeys.sqlite.map(s=>e.jsx(u,{cacheKey:s,instance:r,type:"sqlite"},s))]})]})});function u({cacheKey:a,instance:t,type:n}){const c=g(),i=P(),l=encodeURIComponent(a),r=`/admin/cache/${n}/${l}?instance=${t}`;return e.jsxs("div",{className:"flex items-center gap-2 font-mono",children:[e.jsxs(c.Form,{method:"POST",children:[e.jsx("input",{type:"hidden",name:"cacheKey",value:a}),e.jsx("input",{type:"hidden",name:"instance",value:t}),e.jsx("input",{type:"hidden",name:"type",value:n}),e.jsx(b,{size:"sm",variant:"secondary",...i.getButtonProps({type:"submit"}),children:c.state==="idle"?i.doubleCheck?"You sure?":"Delete":"Deleting..."})]}),e.jsx(v,{reloadDocument:!0,to:r,children:a})]})}const V=p(function(){return e.jsx(N,{statusHandlers:{403:({error:t})=>e.jsxs("p",{children:["You are not allowed to do that: ",t?.data.message]})}})});export{V as ErrorBoundary,T as default,$ as handle};
//# sourceMappingURL=cache-DBsQ7cUp.js.map
